<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">

  <% include ../../partials/header.ejs %>

    <style>
      body {
        margin-top: 50px;
        text-align: center;
      }

      #motion {
        border: 5px solid SILVER;
        background: linear-gradient(to top, LEMONCHIFFON, LEMONCHIFFON, SKYBLUE, SKYBLUE, SKYBLUE, SKYBLUE, SKYBLUE);
      }
    </style>
</head>

<body>

  <div class="container">
    <canvas id="motion"></canvas>
  </div>

  <script>
    var motion = document.getElementById("motion");
    motion.width = 800;
    motion.height = 400;
    var socket = io();
    var stage = new createjs.Stage("motion");
    var bmp = new createjs.Bitmap("http://scratch.by/upload/iblock/b63/dog_120.png");
    bmp.x = 350;
    bmp.y = 280;
    stage.addChild(bmp);

    createjs.Tween.get(bmp, {
        loop: true
      })
      .to({
        y: 272,
      }, 200, createjs.Ease.getPowInOut(0.5))
      .to({
        scaleX: 1.3,
        scaleY: 1.3,
        y: 180,
      }, 120, createjs.Ease.getPowInOut(1))
      .to({
        rotation: 180
      }, 150, createjs.Ease.getPowInOut(1))
      .to({
        rotation: 240
      }, 80, createjs.Ease.getPowInOut(1))
      .to({
        rotation: 300
      }, 80, createjs.Ease.getPowInOut(1))
      .to({
        y: 280,
        scaleX: 0.8,
        scaleY: 0.8,
        rotation: 360
      }, 100, createjs.Ease.getPowInOut(0.5))

    createjs.Ticker.setFPS(60);
    createjs.Ticker.addEventListener("tick", stage);

    socket.on('interface+motion_listen', function(data) {
      switch (data.command) {
        case 'right':
          bmp.x += 50;
          break;
        case 'left':
          bmp.x -= 50;
          break;
      }
      stage.update();
    });
  </script>

</body>

</html>
